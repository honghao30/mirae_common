<!DOCTYPE html>
<html lang="ko">
<head></head>
<body>
    <div class="guide_wrap">
        <div class="header__wrap">
            <div data-include-path="../top_nav.html"></div>   
            <div data-include-path="../site-name.html"></div>
        </div>
        <div class="guide-content__wrap">         
            <div class="guide-cont">
                <div class="page_tit_h1">무한 스크롤</div>
                <style>
                    .content-list {
                        margin-top: 20px;
                    }
                    .infinity-list li {
                        padding: 20px;
                        border: 1px solid #ccc;
                        margin-bottom: 10px;
                    }
                    .loading {
                        text-align: center;
                        padding: 30px;
                        font-size: 1.2em;
                        color: #888;
                    }
                </style>
                <div class="type-infinity mt-10">
                    <ul class="infinity-list">
                        <li>
                            <a href="#">
                                <i class="ico ico-all"></i>
                                <div class="title-area">
                                    <div class="title"><span>[전체]</span> 온라인 보험 사이트 이용 제한 안내 </div>
                                    <div class="date">2024.03.27 </div>
                                </div>
                            </a>
                        </li>       
                        <li>
                            <a href="#">
                                <i class="ico ico-common"></i>
                                <div class="title-area">
                                    <div class="title"><span>[공통]</span> 온라인 보험 사이트 이용 제한 안내 </div>
                                    <div class="date">2024.03.27 </div>
                                </div>
                            </a>
                        </li>   
                        <li>
                            <a href="#">
                                <i class="ico ico-common"></i>
                                <div class="title-area">
                                    <div class="title"><span>[공통]</span> 온라인 보험 사이트 이용 제한 안내 </div>
                                    <div class="date">2024.03.27 </div>
                                </div>
                            </a>
                        </li>  
                        <li>
                            <a href="#">
                                <i class="ico ico-health"></i>
                                <div class="title-area">
                                    <div class="title"><span>[헬스케어]</span> 온라인 보험 사이트 이용 제한 안내 </div>
                                    <div class="date">2024.03.27 </div>
                                </div>
                            </a>
                        </li>   
                        <li>
                            <a href="#">
                                <i class="ico ico-pension"></i>
                                <div class="title-area">
                                    <div class="title"><span>[퇴직연금]</span> 온라인 보험 사이트 이용 제한 안내 </div>
                                    <div class="date">2024.03.27 </div>
                                </div>
                            </a>
                        </li>  
                        <li>
                            <a href="#">
                                <i class="ico ico-fund"></i>
                                <div class="title-area">
                                    <div class="title"><span>[펀드신탁]</span> 온라인 보험 사이트 이용 제한 안내 </div>
                                    <div class="date">2024.03.27 </div>
                                </div>
                            </a>
                        </li>                                      
                    </ul>
                    <div class="scroll-target">
                        <div class="loading"></div>
                    </div>
                </div>                
                <!-- //스크롤 컨텐츠 -->
                <script type="module">                    
                    import { infiniteScroll } from "/assets/js/ui_common.js";
                    
                    // 전역 변수 및 함수 설정
                    const maxItems = 100; // 로드할 최대 아이템 수
                    let totalLoadedItems = 0; // 총 로드된 아이템 수를 추적
                
                    // 컨텐츠 생성 함수
                    const loadMoreContent = async (count = 5) => {
                        const contentList = document.querySelector('.infinity-list');
                        if (!contentList) {
                            console.error("Content list element not found.");
                            return false;
                        }
                
                        let hasMoreContent = true;
                
                        // 남은 아이템 수를 계산
                        const remainingItems = maxItems - totalLoadedItems;
                        const newItemsCount = Math.min(count, remainingItems);
                        
                        const newAddItems = contentList.querySelector('.infinity-list li').innerHTML;

                        for (let i = 0; i < newItemsCount; i++) {
                            const newContent = document.createElement('li');                            
                            newContent.innerHTML = newAddItems;                    
                            contentList.appendChild(newContent);
                            totalLoadedItems++; // 총 로드된 아이템 수 증가
                        }
                
                        // 더 이상 로드할 아이템이 없으면 hasMoreContent를 false로 설정
                        if (totalLoadedItems >= maxItems) {
                            hasMoreContent = false;
                        }
                
                        return hasMoreContent;
                    };
                
                    // `infiniteScroll` 함수 호출 시 전역 변수 및 함수 전달
                    document.addEventListener('DOMContentLoaded', () => {
                        infiniteScroll(loadMoreContent, totalLoadedItems, maxItems);
                    });
                </script>               
            </div>
        </div>
    </div>
    <script  type="module" src="../guide.js"></script>    
</body>
</html>