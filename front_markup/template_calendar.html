<!DOCTYPE html>
<html lang="ko">
<head></head>
<body>
    <div class="wrap">
        <div data-include-path="./_inc/head_sub.html"></div>
        <div class="content">
            <div class="month-calendar">    
                <div class="calendar__wrap" id="page-cal">
                    <div class="calendar__header">
                        <button type="button" class="btn-prev-month">이전</button>
                        <div class="display-data"></div>
                        <button type="button" class="btn-next-month">다음</button>
                        <button type="button" class="btn-show-today">오늘</button>
                    </div>
                    <div class="calendar__content">
                        <table>
                            <thead>
                                <tr>
                                    <th scope="col" class="holiday">일</th>
                                    <th scope="col">월</th>
                                    <th scope="col">화</th>
                                    <th scope="col">수</th>
                                    <th scope="col">목</th>
                                    <th scope="col">금</th>
                                    <th scope="col" class="holiday">토</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>     
                <div class="weekly-calendar">
                    <div class="calendar__wrap" id="calendarWeekly2">
                        <div class="calendar__header">
                            <div class="display-data">2024년 6월 27일</div>
                        </div>
                        <div class="calendar__content">
                            <ul class="weekly-cal__header" id="weeklyLabels"></ul>
                            <ul id="weekDates"></ul>
                            <div class="swiper calendar-swiper">
                                <div class="swiper-wrapper">
                                </div>
                            </div>                            
                        </div>
                    </div>    
                    <div class="detail-section">
                        <div class="detail-day"></div>
                        오늘 날짜에 해당하는 값
                    </div>                
                </div>     
                <style>
                    .calendar-swiper .swiper-slide,
                    .calendar-swiper .swiper-slide ul {
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        width: 100%;
                    }              
                    .calendar-swiper .swiper-slide>div,
                    .calendar-swiper .swiper-slide>ul>li {
                        text-align: center;
                        width: calc(100% / 7);
                    }
                </style>
                <script type="module">
                    import { newMonthlyCalendar, createWeeklyCalendar } from "/assets/js/calendar.js";
                    import { swiperCustom, SlideVideo, SlideVideoPlayBtn } from "/assets/js/swiper_custom.js";

                    newMonthlyCalendar('page-cal', { button: true, displayData: 'default' });
                    createWeeklyCalendar('calendarWeekly2', { button: false, displayDay: 'none', userSwiping: true });
                    const swiper0 = swiperCustom('.calendar-swiper', 1, {
                        pagination: false, 
                        spaceBetween: 0,  
                        slidesPerGroup: 1, 
                        lazyLoading: true,	
                        lazyLoadingInPrevNext: true,   
                        observeParents: true,
                        observeSlideChildren: true,
                        observer: true,                 
                    });
                </script>
            </div>

            <style>
                .draglist {
                    display: flex;
                    flex-direction: column;
                    gap: 10px;position: absolute;left: 50%;transform: translateX(-50%);
                }
            </style>
            
            <div style="height: 500px;text-align: center;margin-top: 100px;display: flex;align-items: center;justify-content: center;position: relative;overflow: hidden;">
                <div style="width: 100%;height: 40px;border: 1px solid red;" class="select-value">
                    <p style="text-align: right;" id="selected-value">10</p>
                    <ul class="draglist" style="top: 0px;">
                        <li>1</li>
                        <li>2</li>
                        <li>3</li>
                        <li>4</li>
                        <li>5</li>
                        <li>6</li>
                        <li>7</li>
                        <li>8</li>
                        <li>9</li>
                        <li>10</li>
                        <li>11</li>
                        <li>12</li>
                        <li>13</li>
                        <li>14</li>
                        <li>15</li>
                        <li>16</li>
                        <li>17</li>
                        <li>18</li>
                        <li>19</li>
                        <li>20</li>
                        <li>21</li>
                        <li>22</li>
                        <li>23</li>                        
                    </ul>
                </div>
            </div>
            <script>
                const dragList = document.querySelector('.draglist');
                const selectedValueElement = document.getElementById('selected-value');
                const selectValueContainer = document.querySelector('.select-value');
        
                let startY;
                let startTop;
        
                selectValueContainer.addEventListener('touchstart', function (e) {
                    startY = e.touches[0].clientY;
                    startTop = parseInt(window.getComputedStyle(dragList).top, 10);
                });
        
                selectValueContainer.addEventListener('touchmove', function (e) {
                    const touchY = e.touches[0].clientY;
                    const deltaY = touchY - startY;
                    dragList.style.top = `${startTop + deltaY}px`;
                });
        
                selectValueContainer.addEventListener('touchend', function (e) {
                    const touchY = e.changedTouches[0].clientY;
                    const deltaY = touchY - startY;
                    const itemHeight = dragList.querySelector('li').offsetHeight;
                    const offset = Math.round(deltaY / itemHeight);
                    const newTop = startTop + offset * itemHeight;
                    
                    // Check boundaries
                    const maxTop = 0;
                    const minTop = - (dragList.offsetHeight - selectValueContainer.offsetHeight);
                    dragList.style.top = `${Math.min(maxTop, Math.max(minTop, newTop))}px`;
        
                    // Calculate and display selected value
                    const selectedIndex = Math.abs(Math.round(newTop / itemHeight));
                    const selectedValue = dragList.children[selectedIndex].textContent;
                    selectedValueElement.textContent = selectedValue;
                });
            </script>
            <!-- <div style="height: 500px;text-align: center;margin-top: 100px;">
                <input id="pi_input" type="range" min="0" max="17.14" step="any" />
                <p>Value: <output id="value"></output></p>
                <style>
                    input[type="range"] {
                        writing-mode: vertical-lr;
                        }
                </style>
                <script>
                    const value = document.querySelector("#value");
                    const input = document.querySelector("#pi_input");
                    value.textContent = input.value;
                    input.addEventListener("input", (event) => {
                    value.textContent = event.target.value;
                    });
                </script>                    
            </div>         
        </div> -->
    </div>    
    <!-- 퍼블 단계에서 공통 영역 include를 위한 스크립트 -->
    <script type="module" src="/assets/js/pub_include.js"></script>

    <script type="text/javascript" src="/assets/bundle/swiper-bundle.min.js"></script>
    <script src="/assets/bundle/dayjs/dayjs.min.js"></script>
    <script src="/assets/bundle/dayjs/isSameOrBefore.js"></script>
    <script src="/assets/bundle/dayjs/ko.js"></script>
    <script type="module" src="/assets/js/index.js"></script>    
</body>
</html>
