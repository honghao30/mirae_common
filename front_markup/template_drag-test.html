<!DOCTYPE html>
<html lang="ko">
<head></head>
<body>
    <div class="wrap">
        <div data-include-path="./_inc/head_sub.html"></div>
        <div class="content">
            <style>
                .draglist {
                    display: flex;
                    flex-direction: column;
                    gap: 10px;position: absolute;left: 50%;transform: translateX(-50%);
                }
            </style>
            <div class="test--wrap flex justify-between gap-10">
                <div style="height: 500px;text-align: center;display: flex;align-items: center;justify-content: center;position: relative;overflow: hidden;width: 40%;">
                    <div style="width: 100%;height: 40px;border: 1px solid red;" class="select-value">
                        <p style="text-align: right;" id="selected-value">10</p>
                        <ul class="draglist" style="top: 0px;">
                            <li>1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                            <li>5</li>
                            <li>6</li>
                            <li>7</li>
                            <li>8</li>
                            <li>9</li>
                            <li>10</li>
                            <li>11</li>
                            <li>12</li>
                            <li>13</li>
                            <li>14</li>
                            <li>15</li>
                            <li>16</li>
                            <li>17</li>
                            <li>18</li>
                            <li>19</li>
                            <li>20</li>
                            <li>21</li>
                            <li>22</li>
                            <li>23</li>                        
                        </ul>
                    </div>
                </div>
                <div style="height: 500px;width: 40%;">
                    <div class="swiper drag-input">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">Slide 1</div>
                            <div class="swiper-slide">Slide 2</div>
                            <div class="swiper-slide">Slide 3</div>
                            <div class="swiper-slide">Slide 4</div>
                            <div class="swiper-slide">Slide 5</div>
                            <div class="swiper-slide">Slide 6</div>
                            <div class="swiper-slide">Slide 7</div>
                            <div class="swiper-slide">Slide 8</div>
                            <div class="swiper-slide">Slide 9</div>
                            <div class="swiper-slide">Slide 10</div>
                            <div class="swiper-slide">Slide 11</div>
                            <div class="swiper-slide">Slide 12</div>
                            <div class="swiper-slide">Slide 13</div>  
                            <div class="swiper-slide">Slide 14</div>
                            <div class="swiper-slide">Slide 15</div>
                            <div class="swiper-slide">Slide 16</div>
                            <div class="swiper-slide">Slide 17</div>
                            <div class="swiper-slide">Slide 18</div>                          
                        </div>
                    </div>    
                </div>
            </div>

            <script type="module">
                const dragList = document.querySelector('.draglist');
                const selectedValueElement = document.getElementById('selected-value');
                const selectValueContainer = document.querySelector('.select-value');
        
                let startY;
                let startTop;
        
                selectValueContainer.addEventListener('touchstart', function (e) {
                    startY = e.touches[0].clientY;
                    startTop = parseInt(window.getComputedStyle(dragList).top, 10);
                });
        
                selectValueContainer.addEventListener('touchmove', function (e) {
                    const touchY = e.touches[0].clientY;
                    const deltaY = touchY - startY;
                    dragList.style.top = `${startTop + deltaY}px`;
                });
        
                selectValueContainer.addEventListener('touchend', function (e) {
                    const touchY = e.changedTouches[0].clientY;
                    const deltaY = touchY - startY;
                    const itemHeight = dragList.querySelector('li').offsetHeight;
                    const offset = Math.round(deltaY / itemHeight);
                    const newTop = startTop + offset * itemHeight;
                    
                    // Check boundaries
                    const maxTop = 0;
                    const minTop = - (dragList.offsetHeight - selectValueContainer.offsetHeight);
                    dragList.style.top = `${Math.min(maxTop, Math.max(minTop, newTop))}px`;
        
                    // Calculate and display selected value
                    const selectedIndex = Math.abs(Math.round(newTop / itemHeight));
                    const selectedValue = dragList.children[selectedIndex].textContent;
                    selectedValueElement.textContent = selectedValue;
                });

                import { swiperCustom, SlideVideo, SlideVideoPlayBtn } from "/assets/js/swiper_custom.js";                
                
                const swiper0 = swiperCustom('.drag-input', 1, {
                    pagination: false, 
                    slidesPerView: 1,
                    spaceBetween: 0,                      
                    direction: "vertical",
                    lazyLoading: true,	
                    lazyLoadingInPrevNext: true,   
                    observeParents: true,
                    observeSlideChildren: true,
                    observer: true,                 
                });                
            </script>
    </div>    
    <!-- 퍼블 단계에서 공통 영역 include를 위한 스크립트 -->
    <script type="module" src="/assets/js/pub_include.js"></script>

    <script type="text/javascript" src="/assets/bundle/swiper-bundle.min.js"></script>
    <script src="/assets/bundle/dayjs/dayjs.min.js"></script>
    <script src="/assets/bundle/dayjs/isSameOrBefore.js"></script>
    <script src="/assets/bundle/dayjs/ko.js"></script>
    <script type="module" src="/assets/js/index.js"></script>    
</body>
</html>
